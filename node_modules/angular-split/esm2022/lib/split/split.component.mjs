import { ChangeDetectionStrategy, Component, ElementRef, HostBinding, InjectionToken, NgZone, Renderer2, booleanAttribute, computed, contentChild, contentChildren, effect, inject, input, output, signal, untracked, } from '@angular/core';
import { takeUntilDestroyed } from '@angular/core/rxjs-interop';
import { Subject, filter, fromEvent, map, pairwise, skipWhile, startWith, switchMap, take, takeUntil, tap } from 'rxjs';
import { createClassesString, gutterEventsEqualWithDelta, fromMouseMoveEvent, fromMouseUpEvent, getPointFromEvent, leaveNgZone, numberAttributeWithFallback, sum, toRecord, } from '../utils';
import { DOCUMENT, NgStyle, NgTemplateOutlet } from '@angular/common';
import { SplitCustomEventsBehaviorDirective } from '../split-custom-events-behavior.directive';
import { areAreasValid } from '../validations';
import { SplitGutterDirective } from '../gutter/split-gutter.directive';
import { SplitGutterDynamicInjectorDirective } from '../gutter/split-gutter-dynamic-injector.directive';
import { ANGULAR_SPLIT_DEFAULT_OPTIONS } from '../angular-split-config.token';
import * as i0 from "@angular/core";
export const SPLIT_AREA_CONTRACT = new InjectionToken('Split Area Contract');
export class SplitComponent {
    get hostClassesBinding() {
        return this.hostClasses();
    }
    get hostDirBinding() {
        return this.dir();
    }
    constructor() {
        this.document = inject(DOCUMENT);
        this.renderer = inject(Renderer2);
        this.elementRef = inject(ElementRef);
        this.ngZone = inject(NgZone);
        this.defaultOptions = inject(ANGULAR_SPLIT_DEFAULT_OPTIONS);
        this.gutterMouseDownSubject = new Subject();
        this.dragProgressSubject = new Subject();
        /**
         * @internal
         */
        this._areas = contentChildren(SPLIT_AREA_CONTRACT);
        this.customGutter = contentChild(SplitGutterDirective);
        this.gutterSize = input(this.defaultOptions.gutterSize, {
            transform: numberAttributeWithFallback(this.defaultOptions.gutterSize),
        });
        this.gutterStep = input(this.defaultOptions.gutterStep, {
            transform: numberAttributeWithFallback(this.defaultOptions.gutterStep),
        });
        this.disabled = input(this.defaultOptions.disabled, { transform: booleanAttribute });
        this.gutterClickDeltaPx = input(this.defaultOptions.gutterClickDeltaPx, {
            transform: numberAttributeWithFallback(this.defaultOptions.gutterClickDeltaPx),
        });
        this.direction = input(this.defaultOptions.direction);
        this.dir = input(this.defaultOptions.dir);
        this.unit = input(this.defaultOptions.unit);
        this.gutterAriaLabel = input();
        this.restrictMove = input(this.defaultOptions.restrictMove, { transform: booleanAttribute });
        this.useTransition = input(this.defaultOptions.useTransition, { transform: booleanAttribute });
        this.gutterDblClickDuration = input(this.defaultOptions.gutterDblClickDuration, {
            transform: numberAttributeWithFallback(this.defaultOptions.gutterDblClickDuration),
        });
        this.gutterClick = output();
        this.gutterDblClick = output();
        this.dragStart = output();
        this.dragEnd = output();
        this.transitionEnd = output();
        this.dragProgress$ = this.dragProgressSubject.asObservable();
        this.visibleAreas = computed(() => this._areas().filter((area) => area.visible()));
        this.gridTemplateColumnsStyle = computed(() => {
            const columns = [];
            const sumNonWildcardSizes = sum(this.visibleAreas(), (area) => {
                const size = area._internalSize();
                return size === '*' ? 0 : size;
            });
            const visibleAreasCount = this.visibleAreas().length;
            let visitedVisibleAreas = 0;
            this._areas().forEach((area, index, areas) => {
                const unit = this.unit();
                const areaSize = area._internalSize();
                // Add area size column
                if (!area.visible()) {
                    columns.push(unit === 'percent' || areaSize === '*' ? '0fr' : '0px');
                }
                else {
                    if (unit === 'pixel') {
                        const columnValue = areaSize === '*' ? '1fr' : `${areaSize}px`;
                        columns.push(columnValue);
                    }
                    else {
                        const percentSize = areaSize === '*' ? 100 - sumNonWildcardSizes : areaSize;
                        const columnValue = `${percentSize}fr`;
                        columns.push(columnValue);
                    }
                    visitedVisibleAreas++;
                }
                const isLastArea = index === areas.length - 1;
                if (isLastArea) {
                    return;
                }
                const remainingVisibleAreas = visibleAreasCount - visitedVisibleAreas;
                // Only add gutter with size if this area is visible and there are more visible areas after this one
                // to avoid ghost gutters
                if (area.visible() && remainingVisibleAreas > 0) {
                    columns.push(`${this.gutterSize()}px`);
                }
                else {
                    columns.push('0px');
                }
            });
            return this.direction() === 'horizontal' ? `1fr / ${columns.join(' ')}` : `${columns.join(' ')} / 1fr`;
        });
        this.hostClasses = computed(() => createClassesString({
            [`as-${this.direction()}`]: true,
            [`as-${this.unit()}`]: true,
            ['as-disabled']: this.disabled(),
            ['as-dragging']: this._isDragging(),
            ['as-transition']: this.useTransition() && !this._isDragging(),
        }));
        this.draggedGutterIndex = signal(undefined);
        /**
         * @internal
         */
        this._isDragging = computed(() => this.draggedGutterIndex() !== undefined);
        effect(() => {
            const visibleAreas = this.visibleAreas();
            const unit = this.unit();
            const isInAutoMode = visibleAreas.every((area) => area.size() === 'auto');
            untracked(() => {
                // Special mode when no size input was declared which is a valid mode
                if (unit === 'percent' && visibleAreas.length > 1 && isInAutoMode) {
                    visibleAreas.forEach((area) => area._internalSize.set(100 / visibleAreas.length));
                    return;
                }
                visibleAreas.forEach((area) => area._internalSize.reset());
                const isValid = areAreasValid(visibleAreas, unit);
                if (isValid) {
                    return;
                }
                if (unit === 'percent') {
                    // Distribute sizes equally
                    const defaultSize = 100 / visibleAreas.length;
                    visibleAreas.forEach((area) => area._internalSize.set(defaultSize));
                }
                else if (unit === 'pixel') {
                    const wildcardAreas = visibleAreas.filter((area) => area._internalSize() === '*');
                    // Make sure only one wildcard area
                    if (wildcardAreas.length === 0) {
                        visibleAreas[0]._internalSize.set('*');
                    }
                    else if (wildcardAreas.length > 1) {
                        wildcardAreas.filter((_, i) => i !== 0).forEach((area) => area._internalSize.set(100));
                    }
                }
            });
        }, { allowSignalWrites: true });
        // Responsible for updating grid template style. Must be this way and not based on HostBinding
        // as change detection for host binding is bound to the parent component and this style
        // is updated on every mouse move. Doing it this way will prevent change detection cycles in parent.
        effect(() => {
            const gridTemplateColumnsStyle = this.gridTemplateColumnsStyle();
            this.renderer.setStyle(this.elementRef.nativeElement, 'grid-template', gridTemplateColumnsStyle);
        });
        this.gutterMouseDownSubject
            .pipe(filter((context) => !this.customGutter() ||
            this.customGutter().canStartDragging(context.mouseDownEvent.target, context.gutterIndex + 1)), switchMap((mouseDownContext) => 
        // As we have gutterClickDeltaPx we can't just start the drag but need to make sure
        // we are out of the delta pixels. As the delta can be any number we make sure
        // we always start the drag if we go out of the gutter (delta based on mouse position is larger than gutter).
        // As moving can start inside the drag and end outside of it we always keep track of the previous event
        // so once the current is out of the delta size we use the previous one as the drag start baseline.
        fromMouseMoveEvent(this.document).pipe(startWith(mouseDownContext.mouseDownEvent), pairwise(), skipWhile(([, currMoveEvent]) => gutterEventsEqualWithDelta(mouseDownContext.mouseDownEvent, currMoveEvent, this.gutterClickDeltaPx(), mouseDownContext.gutterElement)), take(1), takeUntil(fromMouseUpEvent(this.document, true)), tap(() => {
            this.ngZone.run(() => {
                this.dragStart.emit(this.createDragInteractionEvent(mouseDownContext.gutterIndex));
                this.draggedGutterIndex.set(mouseDownContext.gutterIndex);
            });
        }), map(([prevMouseEvent]) => this.createDragStartContext(prevMouseEvent, mouseDownContext.areaBeforeGutterIndex, mouseDownContext.areaAfterGutterIndex)), switchMap((dragStartContext) => fromMouseMoveEvent(this.document).pipe(tap((moveEvent) => this.mouseDragMove(moveEvent, dragStartContext)), takeUntil(fromMouseUpEvent(this.document, true)), tap({
            complete: () => this.ngZone.run(() => {
                this.dragEnd.emit(this.createDragInteractionEvent(this.draggedGutterIndex()));
                this.draggedGutterIndex.set(undefined);
            }),
        }))))), takeUntilDestroyed())
            .subscribe();
        fromEvent(this.elementRef.nativeElement, 'transitionend')
            .pipe(filter((e) => e.propertyName.startsWith('grid-template')), leaveNgZone(), takeUntilDestroyed())
            .subscribe(() => this.ngZone.run(() => this.transitionEnd.emit(this.createAreaSizes())));
    }
    gutterClicked(gutterIndex) {
        this.ngZone.run(() => this.gutterClick.emit(this.createDragInteractionEvent(gutterIndex)));
    }
    gutterDoubleClicked(gutterIndex) {
        this.ngZone.run(() => this.gutterDblClick.emit(this.createDragInteractionEvent(gutterIndex)));
    }
    gutterMouseDown(e, gutterElement, gutterIndex, areaBeforeGutterIndex, areaAfterGutterIndex) {
        if (this.disabled()) {
            return;
        }
        e.preventDefault();
        e.stopPropagation();
        this.gutterMouseDownSubject.next({
            mouseDownEvent: e,
            gutterElement,
            gutterIndex,
            areaBeforeGutterIndex,
            areaAfterGutterIndex,
        });
    }
    gutterKeyDown(e, gutterIndex, areaBeforeGutterIndex, areaAfterGutterIndex) {
        if (this.disabled()) {
            return;
        }
        const pixelsToMove = 50;
        const pageMoveMultiplier = 10;
        let xPointOffset = 0;
        let yPointOffset = 0;
        if (this.direction() === 'horizontal') {
            // Even though we are going in the x axis we support page up and down
            switch (e.key) {
                case 'ArrowLeft':
                    xPointOffset -= pixelsToMove;
                    break;
                case 'ArrowRight':
                    xPointOffset += pixelsToMove;
                    break;
                case 'PageUp':
                    if (this.dir() === 'rtl') {
                        xPointOffset -= pixelsToMove * pageMoveMultiplier;
                    }
                    else {
                        xPointOffset += pixelsToMove * pageMoveMultiplier;
                    }
                    break;
                case 'PageDown':
                    if (this.dir() === 'rtl') {
                        xPointOffset += pixelsToMove * pageMoveMultiplier;
                    }
                    else {
                        xPointOffset -= pixelsToMove * pageMoveMultiplier;
                    }
                    break;
                default:
                    return;
            }
        }
        else {
            switch (e.key) {
                case 'ArrowUp':
                    yPointOffset -= pixelsToMove;
                    break;
                case 'ArrowDown':
                    yPointOffset += pixelsToMove;
                    break;
                case 'PageUp':
                    yPointOffset -= pixelsToMove * pageMoveMultiplier;
                    break;
                case 'PageDown':
                    yPointOffset += pixelsToMove * pageMoveMultiplier;
                    break;
                default:
                    return;
            }
        }
        e.preventDefault();
        e.stopPropagation();
        const gutterMidPoint = getPointFromEvent(e);
        const dragStartContext = this.createDragStartContext(e, areaBeforeGutterIndex, areaAfterGutterIndex);
        this.ngZone.run(() => {
            this.dragStart.emit(this.createDragInteractionEvent(gutterIndex));
            this.draggedGutterIndex.set(gutterIndex);
        });
        this.dragMoveToPoint({ x: gutterMidPoint.x + xPointOffset, y: gutterMidPoint.y + yPointOffset }, dragStartContext);
        this.ngZone.run(() => {
            this.dragEnd.emit(this.createDragInteractionEvent(gutterIndex));
            this.draggedGutterIndex.set(undefined);
        });
    }
    getGutterGridStyle(nextAreaIndex) {
        const gutterNum = nextAreaIndex * 2;
        const style = `${gutterNum} / ${gutterNum}`;
        return {
            ['grid-column']: this.direction() === 'horizontal' ? style : '1',
            ['grid-row']: this.direction() === 'vertical' ? style : '1',
        };
    }
    getAriaAreaSizeText(area) {
        const size = area._internalSize();
        if (size === '*') {
            return undefined;
        }
        return `${size.toFixed(0)} ${this.unit()}`;
    }
    getAriaValue(size) {
        return size === '*' ? undefined : size;
    }
    createDragInteractionEvent(gutterIndex) {
        return {
            gutterNum: gutterIndex + 1,
            sizes: this.createAreaSizes(),
        };
    }
    createAreaSizes() {
        return this.visibleAreas().map((area) => area._internalSize());
    }
    createDragStartContext(startEvent, areaBeforeGutterIndex, areaAfterGutterIndex) {
        const splitBoundingRect = this.elementRef.nativeElement.getBoundingClientRect();
        const splitSize = this.direction() === 'horizontal' ? splitBoundingRect.width : splitBoundingRect.height;
        const totalAreasPixelSize = splitSize - (this.visibleAreas().length - 1) * this.gutterSize();
        // Use the internal size and split size to calculate the pixel size from wildcard and percent areas
        const areaPixelSizesWithWildcard = this._areas().map((area) => {
            if (this.unit() === 'pixel') {
                return area._internalSize();
            }
            else {
                const size = area._internalSize();
                if (size === '*') {
                    return size;
                }
                return (size / 100) * totalAreasPixelSize;
            }
        });
        const remainingSize = Math.max(0, totalAreasPixelSize - sum(areaPixelSizesWithWildcard, (size) => (size === '*' ? 0 : size)));
        const areasPixelSizes = areaPixelSizesWithWildcard.map((size) => (size === '*' ? remainingSize : size));
        return {
            startEvent,
            areaBeforeGutterIndex,
            areaAfterGutterIndex,
            areasPixelSizes,
            totalAreasPixelSize,
            areaIndexToBoundaries: toRecord(this._areas(), (area, index) => {
                const percentToPixels = (percent) => (percent / 100) * totalAreasPixelSize;
                const value = this.unit() === 'pixel'
                    ? {
                        min: area._normalizedMinSize(),
                        max: area._normalizedMaxSize(),
                    }
                    : {
                        min: percentToPixels(area._normalizedMinSize()),
                        max: percentToPixels(area._normalizedMaxSize()),
                    };
                return [index.toString(), value];
            }),
        };
    }
    mouseDragMove(moveEvent, dragStartContext) {
        moveEvent.preventDefault();
        moveEvent.stopPropagation();
        const endPoint = getPointFromEvent(moveEvent);
        this.dragMoveToPoint(endPoint, dragStartContext);
    }
    dragMoveToPoint(endPoint, dragStartContext) {
        const startPoint = getPointFromEvent(dragStartContext.startEvent);
        const preDirOffset = this.direction() === 'horizontal' ? endPoint.x - startPoint.x : endPoint.y - startPoint.y;
        const offset = this.direction() === 'horizontal' && this.dir() === 'rtl' ? -preDirOffset : preDirOffset;
        const isDraggingForward = offset > 0;
        // Align offset with gutter step and abs it as we need absolute pixels movement
        const absSteppedOffset = Math.abs(Math.round(offset / this.gutterStep()) * this.gutterStep());
        // Copy as we don't want to edit the original array
        const tempAreasPixelSizes = [...dragStartContext.areasPixelSizes];
        // As we are going to shuffle the areas order for easier iterations we should work with area indices array
        // instead of actual area sizes array.
        const areasIndices = tempAreasPixelSizes.map((_, index) => index);
        // The two variables below are ordered for iterations with real area indices inside.
        // We must also remove the invisible ones as we can't expand or shrink them.
        const areasIndicesBeforeGutter = this.restrictMove()
            ? [dragStartContext.areaBeforeGutterIndex]
            : areasIndices
                .slice(0, dragStartContext.areaBeforeGutterIndex + 1)
                .filter((index) => this._areas()[index].visible())
                .reverse();
        const areasIndicesAfterGutter = this.restrictMove()
            ? [dragStartContext.areaAfterGutterIndex]
            : areasIndices.slice(dragStartContext.areaAfterGutterIndex).filter((index) => this._areas()[index].visible());
        // Based on direction we need to decide which areas are expanding and which are shrinking
        const potentialAreasIndicesArrToShrink = isDraggingForward ? areasIndicesAfterGutter : areasIndicesBeforeGutter;
        const potentialAreasIndicesArrToExpand = isDraggingForward ? areasIndicesBeforeGutter : areasIndicesAfterGutter;
        let remainingPixels = absSteppedOffset;
        let potentialShrinkArrIndex = 0;
        let potentialExpandArrIndex = 0;
        // We gradually run in both expand and shrink direction transferring pixels from the offset.
        // We stop once no pixels are left or we reached the end of either the expanding areas or the shrinking areas
        while (remainingPixels !== 0 &&
            potentialShrinkArrIndex < potentialAreasIndicesArrToShrink.length &&
            potentialExpandArrIndex < potentialAreasIndicesArrToExpand.length) {
            const areaIndexToShrink = potentialAreasIndicesArrToShrink[potentialShrinkArrIndex];
            const areaIndexToExpand = potentialAreasIndicesArrToExpand[potentialExpandArrIndex];
            const areaToShrinkSize = tempAreasPixelSizes[areaIndexToShrink];
            const areaToExpandSize = tempAreasPixelSizes[areaIndexToExpand];
            const areaToShrinkMinSize = dragStartContext.areaIndexToBoundaries[areaIndexToShrink].min;
            const areaToExpandMaxSize = dragStartContext.areaIndexToBoundaries[areaIndexToExpand].max;
            // We can only transfer pixels based on the shrinking area min size and the expanding area max size
            // to avoid overflow. If any pixels left they will be handled by the next area in the next `while` iteration
            const maxPixelsToShrink = areaToShrinkSize - areaToShrinkMinSize;
            const maxPixelsToExpand = areaToExpandMaxSize - areaToExpandSize;
            const pixelsToTransfer = Math.min(maxPixelsToShrink, maxPixelsToExpand, remainingPixels);
            // Actual pixels transfer
            tempAreasPixelSizes[areaIndexToShrink] -= pixelsToTransfer;
            tempAreasPixelSizes[areaIndexToExpand] += pixelsToTransfer;
            remainingPixels -= pixelsToTransfer;
            // Once min threshold reached we need to move to the next area in turn
            if (tempAreasPixelSizes[areaIndexToShrink] === areaToShrinkMinSize) {
                potentialShrinkArrIndex++;
            }
            // Once max threshold reached we need to move to the next area in turn
            if (tempAreasPixelSizes[areaIndexToExpand] === areaToExpandMaxSize) {
                potentialExpandArrIndex++;
            }
        }
        this._areas().forEach((area, index) => {
            // No need to update wildcard size
            if (area._internalSize() === '*') {
                return;
            }
            if (this.unit() === 'pixel') {
                area._internalSize.set(tempAreasPixelSizes[index]);
            }
            else {
                const percentSize = (tempAreasPixelSizes[index] / dragStartContext.totalAreasPixelSize) * 100;
                // Fix javascript only working with float numbers which are inaccurate compared to decimals
                area._internalSize.set(parseFloat(percentSize.toFixed(10)));
            }
        });
        this.dragProgressSubject.next(this.createDragInteractionEvent(this.draggedGutterIndex()));
    }
    /** @nocollapse */ static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.8", ngImport: i0, type: SplitComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    /** @nocollapse */ static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.8", type: SplitComponent, isStandalone: true, selector: "as-split", inputs: { gutterSize: { classPropertyName: "gutterSize", publicName: "gutterSize", isSignal: true, isRequired: false, transformFunction: null }, gutterStep: { classPropertyName: "gutterStep", publicName: "gutterStep", isSignal: true, isRequired: false, transformFunction: null }, disabled: { classPropertyName: "disabled", publicName: "disabled", isSignal: true, isRequired: false, transformFunction: null }, gutterClickDeltaPx: { classPropertyName: "gutterClickDeltaPx", publicName: "gutterClickDeltaPx", isSignal: true, isRequired: false, transformFunction: null }, direction: { classPropertyName: "direction", publicName: "direction", isSignal: true, isRequired: false, transformFunction: null }, dir: { classPropertyName: "dir", publicName: "dir", isSignal: true, isRequired: false, transformFunction: null }, unit: { classPropertyName: "unit", publicName: "unit", isSignal: true, isRequired: false, transformFunction: null }, gutterAriaLabel: { classPropertyName: "gutterAriaLabel", publicName: "gutterAriaLabel", isSignal: true, isRequired: false, transformFunction: null }, restrictMove: { classPropertyName: "restrictMove", publicName: "restrictMove", isSignal: true, isRequired: false, transformFunction: null }, useTransition: { classPropertyName: "useTransition", publicName: "useTransition", isSignal: true, isRequired: false, transformFunction: null }, gutterDblClickDuration: { classPropertyName: "gutterDblClickDuration", publicName: "gutterDblClickDuration", isSignal: true, isRequired: false, transformFunction: null } }, outputs: { gutterClick: "gutterClick", gutterDblClick: "gutterDblClick", dragStart: "dragStart", dragEnd: "dragEnd", transitionEnd: "transitionEnd" }, host: { properties: { "class": "this.hostClassesBinding", "dir": "this.hostDirBinding" } }, queries: [{ propertyName: "_areas", predicate: SPLIT_AREA_CONTRACT, isSignal: true }, { propertyName: "customGutter", first: true, predicate: SplitGutterDirective, descendants: true, isSignal: true }], exportAs: ["asSplit"], ngImport: i0, template: "<ng-content></ng-content>\n@for (area of _areas(); track area) {\n  @if (!$last) {\n    <div\n      #gutter\n      class=\"as-split-gutter\"\n      role=\"separator\"\n      tabindex=\"0\"\n      [attr.aria-label]=\"gutterAriaLabel()\"\n      [attr.aria-orientation]=\"direction()\"\n      [attr.aria-valuemin]=\"getAriaValue(area.minSize())\"\n      [attr.aria-valuemax]=\"getAriaValue(area.maxSize())\"\n      [attr.aria-valuenow]=\"getAriaValue(area._internalSize())\"\n      [attr.aria-valuetext]=\"getAriaAreaSizeText(area)\"\n      [ngStyle]=\"getGutterGridStyle($index + 1)\"\n      [class.as-dragged]=\"draggedGutterIndex() === $index\"\n      asSplitCustomEventsBehavior\n      [asSplitCustomMultiClickThreshold]=\"gutterDblClickDuration()\"\n      [asSplitCustomClickDeltaInPx]=\"gutterClickDeltaPx()\"\n      (asSplitCustomClick)=\"gutterClicked($index)\"\n      (asSplitCustomDblClick)=\"gutterDoubleClicked($index)\"\n      (asSplitCustomMouseDown)=\"gutterMouseDown($event, gutter, $index, $index, $index + 1)\"\n      (asSplitCustomKeyDown)=\"gutterKeyDown($event, $index, $index, $index + 1)\"\n    >\n      @if (customGutter()?.template) {\n        <ng-container *asSplitGutterDynamicInjector=\"$index + 1; let injector\">\n          <ng-container\n            *ngTemplateOutlet=\"\n              customGutter().template;\n              context: {\n                areaBefore: area,\n                areaAfter: _areas()[$index + 1],\n                gutterNum: $index + 1,\n                first: $first,\n                last: $index === _areas().length - 2,\n                isDragged: draggedGutterIndex() === $index\n              };\n              injector: injector\n            \"\n          ></ng-container>\n        </ng-container>\n      } @else {\n        <div class=\"as-split-gutter-icon\"></div>\n      }\n    </div>\n  }\n}\n", styles: ["@property --as-gutter-background-color{syntax: \"<color>\"; inherits: true; initial-value: #eeeeee;}@property --as-gutter-icon-horizontal{syntax: \"<url>\"; inherits: true; initial-value: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==);}@property --as-gutter-icon-vertical{syntax: \"<url>\"; inherits: true; initial-value: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAMAAABl/6zIAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAABRJREFUeAFjYGRkwIMJSeMHlBkOABP7AEGzSuPKAAAAAElFTkSuQmCC);}@property --as-gutter-icon-disabled{syntax: \"<url>\"; inherits: true; initial-value: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==);}@property --as-transition-duration{syntax: \"<time>\"; inherits: true; initial-value: .3s;}@property --as-gutter-disabled-cursor{syntax: \"*\"; inherits: true; initial-value: default;}:host{--_as-gutter-background-color: var(--as-gutter-background-color, #eeeeee);--_as-gutter-icon-horizontal: var( --as-gutter-icon-horizontal, url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==) );--_as-gutter-icon-vertical: var( --as-gutter-icon-vertical, url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAMAAABl/6zIAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAABRJREFUeAFjYGRkwIMJSeMHlBkOABP7AEGzSuPKAAAAAElFTkSuQmCC) );--_as-gutter-icon-disabled: var( --as-gutter-icon-disabled, url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==) );--_as-transition-duration: var(--as-transition-duration, .3s);--_as-gutter-disabled-cursor: var(--as-gutter-disabled-cursor, default)}:host{display:grid;overflow:hidden;height:100%;width:100%}:host(.as-transition){transition:grid-template var(--_as-transition-duration)}.as-split-gutter{background-color:var(--_as-gutter-background-color);display:flex;align-items:center;justify-content:center;touch-action:none}:host(.as-horizontal)>.as-split-gutter{cursor:col-resize;height:100%}:host(.as-vertical)>.as-split-gutter{cursor:row-resize;width:100%}:host(.as-disabled)>.as-split-gutter{cursor:var(--_as-gutter-disabled-cursor)}.as-split-gutter-icon{width:100%;height:100%;background-position:center center;background-repeat:no-repeat}:host(.as-horizontal)>.as-split-gutter>.as-split-gutter-icon{background-image:var(--_as-gutter-icon-horizontal)}:host(.as-vertical)>.as-split-gutter>.as-split-gutter-icon{background-image:var(--_as-gutter-icon-vertical)}:host(.as-disabled)>.as-split-gutter>.as-split-gutter-icon{background-image:var(--_as-gutter-icon-disabled)}\n"], dependencies: [{ kind: "directive", type: NgStyle, selector: "[ngStyle]", inputs: ["ngStyle"] }, { kind: "directive", type: SplitCustomEventsBehaviorDirective, selector: "[asSplitCustomEventsBehavior]", inputs: ["asSplitCustomMultiClickThreshold", "asSplitCustomClickDeltaInPx"], outputs: ["asSplitCustomMouseDown", "asSplitCustomClick", "asSplitCustomDblClick", "asSplitCustomKeyDown"] }, { kind: "directive", type: SplitGutterDynamicInjectorDirective, selector: "[asSplitGutterDynamicInjector]", inputs: ["asSplitGutterDynamicInjector"] }, { kind: "directive", type: NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.8", ngImport: i0, type: SplitComponent, decorators: [{
            type: Component,
            args: [{ selector: 'as-split', standalone: true, imports: [NgStyle, SplitCustomEventsBehaviorDirective, SplitGutterDynamicInjectorDirective, NgTemplateOutlet], exportAs: 'asSplit', changeDetection: ChangeDetectionStrategy.OnPush, template: "<ng-content></ng-content>\n@for (area of _areas(); track area) {\n  @if (!$last) {\n    <div\n      #gutter\n      class=\"as-split-gutter\"\n      role=\"separator\"\n      tabindex=\"0\"\n      [attr.aria-label]=\"gutterAriaLabel()\"\n      [attr.aria-orientation]=\"direction()\"\n      [attr.aria-valuemin]=\"getAriaValue(area.minSize())\"\n      [attr.aria-valuemax]=\"getAriaValue(area.maxSize())\"\n      [attr.aria-valuenow]=\"getAriaValue(area._internalSize())\"\n      [attr.aria-valuetext]=\"getAriaAreaSizeText(area)\"\n      [ngStyle]=\"getGutterGridStyle($index + 1)\"\n      [class.as-dragged]=\"draggedGutterIndex() === $index\"\n      asSplitCustomEventsBehavior\n      [asSplitCustomMultiClickThreshold]=\"gutterDblClickDuration()\"\n      [asSplitCustomClickDeltaInPx]=\"gutterClickDeltaPx()\"\n      (asSplitCustomClick)=\"gutterClicked($index)\"\n      (asSplitCustomDblClick)=\"gutterDoubleClicked($index)\"\n      (asSplitCustomMouseDown)=\"gutterMouseDown($event, gutter, $index, $index, $index + 1)\"\n      (asSplitCustomKeyDown)=\"gutterKeyDown($event, $index, $index, $index + 1)\"\n    >\n      @if (customGutter()?.template) {\n        <ng-container *asSplitGutterDynamicInjector=\"$index + 1; let injector\">\n          <ng-container\n            *ngTemplateOutlet=\"\n              customGutter().template;\n              context: {\n                areaBefore: area,\n                areaAfter: _areas()[$index + 1],\n                gutterNum: $index + 1,\n                first: $first,\n                last: $index === _areas().length - 2,\n                isDragged: draggedGutterIndex() === $index\n              };\n              injector: injector\n            \"\n          ></ng-container>\n        </ng-container>\n      } @else {\n        <div class=\"as-split-gutter-icon\"></div>\n      }\n    </div>\n  }\n}\n", styles: ["@property --as-gutter-background-color{syntax: \"<color>\"; inherits: true; initial-value: #eeeeee;}@property --as-gutter-icon-horizontal{syntax: \"<url>\"; inherits: true; initial-value: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==);}@property --as-gutter-icon-vertical{syntax: \"<url>\"; inherits: true; initial-value: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAMAAABl/6zIAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAABRJREFUeAFjYGRkwIMJSeMHlBkOABP7AEGzSuPKAAAAAElFTkSuQmCC);}@property --as-gutter-icon-disabled{syntax: \"<url>\"; inherits: true; initial-value: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==);}@property --as-transition-duration{syntax: \"<time>\"; inherits: true; initial-value: .3s;}@property --as-gutter-disabled-cursor{syntax: \"*\"; inherits: true; initial-value: default;}:host{--_as-gutter-background-color: var(--as-gutter-background-color, #eeeeee);--_as-gutter-icon-horizontal: var( --as-gutter-icon-horizontal, url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==) );--_as-gutter-icon-vertical: var( --as-gutter-icon-vertical, url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAMAAABl/6zIAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAABRJREFUeAFjYGRkwIMJSeMHlBkOABP7AEGzSuPKAAAAAElFTkSuQmCC) );--_as-gutter-icon-disabled: var( --as-gutter-icon-disabled, url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==) );--_as-transition-duration: var(--as-transition-duration, .3s);--_as-gutter-disabled-cursor: var(--as-gutter-disabled-cursor, default)}:host{display:grid;overflow:hidden;height:100%;width:100%}:host(.as-transition){transition:grid-template var(--_as-transition-duration)}.as-split-gutter{background-color:var(--_as-gutter-background-color);display:flex;align-items:center;justify-content:center;touch-action:none}:host(.as-horizontal)>.as-split-gutter{cursor:col-resize;height:100%}:host(.as-vertical)>.as-split-gutter{cursor:row-resize;width:100%}:host(.as-disabled)>.as-split-gutter{cursor:var(--_as-gutter-disabled-cursor)}.as-split-gutter-icon{width:100%;height:100%;background-position:center center;background-repeat:no-repeat}:host(.as-horizontal)>.as-split-gutter>.as-split-gutter-icon{background-image:var(--_as-gutter-icon-horizontal)}:host(.as-vertical)>.as-split-gutter>.as-split-gutter-icon{background-image:var(--_as-gutter-icon-vertical)}:host(.as-disabled)>.as-split-gutter>.as-split-gutter-icon{background-image:var(--_as-gutter-icon-disabled)}\n"] }]
        }], ctorParameters: () => [], propDecorators: { hostClassesBinding: [{
                type: HostBinding,
                args: ['class']
            }], hostDirBinding: [{
                type: HostBinding,
                args: ['dir']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3BsaXQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvYW5ndWxhci1zcGxpdC9zcmMvbGliL3NwbGl0L3NwbGl0LmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2FuZ3VsYXItc3BsaXQvc3JjL2xpYi9zcGxpdC9zcGxpdC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0wsdUJBQXVCLEVBQ3ZCLFNBQVMsRUFDVCxVQUFVLEVBQ1YsV0FBVyxFQUNYLGNBQWMsRUFDZCxNQUFNLEVBQ04sU0FBUyxFQUNULGdCQUFnQixFQUNoQixRQUFRLEVBQ1IsWUFBWSxFQUNaLGVBQWUsRUFDZixNQUFNLEVBQ04sTUFBTSxFQUNOLEtBQUssRUFDTCxNQUFNLEVBQ04sTUFBTSxFQUNOLFNBQVMsR0FDVixNQUFNLGVBQWUsQ0FBQTtBQUN0QixPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQTtBQUUvRCxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRSxNQUFNLE1BQU0sQ0FBQTtBQUN2SCxPQUFPLEVBRUwsbUJBQW1CLEVBQ25CLDBCQUEwQixFQUMxQixrQkFBa0IsRUFDbEIsZ0JBQWdCLEVBQ2hCLGlCQUFpQixFQUNqQixXQUFXLEVBQ1gsMkJBQTJCLEVBQzNCLEdBQUcsRUFDSCxRQUFRLEdBQ1QsTUFBTSxVQUFVLENBQUE7QUFDakIsT0FBTyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQTtBQUVyRSxPQUFPLEVBQUUsa0NBQWtDLEVBQUUsTUFBTSwyQ0FBMkMsQ0FBQTtBQUM5RixPQUFPLEVBQUUsYUFB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OlsiaW1wb3J0IHtcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENvbXBvbmVudCxcbiAgRWxlbWVudFJlZixcbiAgSG9zdEJpbmRpbmcsXG4gIEluamVjdGlvblRva2VuLFxuICBOZ1pvbmUsXG4gIFJlbmRlcmVyMixcbiAgYm9vbGVhbkF0dHJpYnV0ZSxcbiAgY29tcHV0ZWQsXG4gIGNvbnRlbnRDaGlsZCxcbiAgY29udGVudENoaWxkcmVuLFxuICBlZmZlY3QsXG4gIGluamVjdCxcbiAgaW5wdXQsXG4gIG91dHB1dCxcbiAgc2lnbmFsLFxuICB1bnRyYWNrZWQsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnXG5pbXBvcnQgeyB0YWtlVW50aWxEZXN0cm95ZWQgfSBmcm9tICdAYW5ndWxhci9jb3JlL3J4anMtaW50ZXJvcCdcbmltcG9ydCB0eXBlIHsgU3BsaXRBcmVhQ29tcG9uZW50IH0gZnJvbSAnLi4vc3BsaXQtYXJlYS9zcGxpdC1hcmVhLmNvbXBvbmVudCdcbmltcG9ydCB7IFN1YmplY3QsIGZpbHRlciwgZnJvbUV2ZW50LCBtYXAsIHBhaXJ3aXNlLCBza2lwV2hpbGUsIHN0YXJ0V2l0aCwgc3dpdGNoTWFwLCB0YWtlLCB0YWtlVW50aWwsIHRhcCB9IGZyb20gJ3J4anMnXG5pbXBvcnQge1xuICBDbGllbnRQb2ludCxcbiAgY3JlYXRlQ2xhc3Nlc1N0cmluZyxcbiAgZ3V0dGVyRXZlbnRzRXF1YWxXaXRoRGVsdGEsXG4gIGZyb21Nb3VzZU1vdmVFdmVudCxcbiAgZnJvbU1vdXNlVXBFdmVudCxcbiAgZ2V0UG9pbnRGcm9tRXZlbnQsXG4gIGxlYXZlTmdab25lLFxuICBudW1iZXJBdHRyaWJ1dGVXaXRoRmFsbGJhY2ssXG4gIHN1bSxcbiAgdG9SZWNvcmQsXG59IGZyb20gJy4uL3V0aWxzJ1xuaW1wb3J0IHsgRE9DVU1FTlQsIE5nU3R5bGUsIE5nVGVtcGxhdGVPdXRsZXQgfSBmcm9tICdAYW5ndWxhci9jb21tb24nXG5pbXBvcnQgeyBTcGxpdEd1dHRlckludGVyYWN0aW9uRXZlbnQsIFNwbGl0QXJlYVNpemUgfSBmcm9tICcuLi9tb2RlbHMnXG5pbXBvcnQgeyBTcGxpdEN1c3RvbUV2ZW50c0JlaGF2aW9yRGlyZWN0aXZlIH0gZnJvbSAnLi4vc3BsaXQtY3VzdG9tLWV2ZW50cy1iZWhhdmlvci5kaXJlY3RpdmUnXG5pbXBvcnQgeyBhcmVBcmVhc1ZhbGlkIH0gZnJvbSAnLi4vdmFsaWRhdGlvbnMnXG5pbXBvcnQgeyBTcGxpdEd1dHRlckRpcmVjdGl2ZSB9IGZyb20gJy4uL2d1dHRlci9zcGxpdC1ndXR0ZXIuZGlyZWN0aXZlJ1xuaW1wb3J0IHsgU3BsaXRHdXR0ZXJEeW5hbWljSW5qZWN0b3JEaXJlY3RpdmUgfSBmcm9tICcuLi9ndXR0ZXIvc3BsaXQtZ3V0dGVyLWR5bmFtaWMtaW5qZWN0b3IuZGlyZWN0aXZlJ1xuaW1wb3J0IHsgQU5HVUxBUl9TUExJVF9ERUZBVUxUX09QVElPTlMgfSBmcm9tICcuLi9hbmd1bGFyLXNwbGl0LWNvbmZpZy50b2tlbidcblxuaW50ZXJmYWNlIE1vdXNlRG93bkNvbnRleHQge1xuICBtb3VzZURvd25FdmVudDogTW91c2VFdmVudCB8IFRvdWNoRXZlbnRcbiAgZ3V0dGVySW5kZXg6IG51bWJlclxuICBndXR0ZXJFbGVtZW50OiBIVE1MRWxlbWVudFxuICBhcmVhQmVmb3JlR3V0dGVySW5kZXg6IG51bWJlclxuICBhcmVhQWZ0ZXJHdXR0ZXJJbmRleDogbnVtYmVyXG59XG5cbmludGVyZmFjZSBBcmVhQm91bmRhcnkge1xuICBtaW46IG51bWJlclxuICBtYXg6IG51bWJlclxufVxuXG5pbnRlcmZhY2UgRHJhZ1N0YXJ0Q29udGV4dCB7XG4gIHN0YXJ0RXZlbnQ6IE1vdXNlRXZlbnQgfCBUb3VjaEV2ZW50IHwgS2V5Ym9hcmRFdmVudFxuICBhcmVhc1BpeGVsU2l6ZXM6IG51bWJlcltdXG4gIHRvdGFsQXJlYXNQaXhlbFNpemU6IG51bWJlclxuICBhcmVhSW5kZXhUb0JvdW5kYXJpZXM6IFJlY29yZDxudW1iZXIsIEFyZWFCb3VuZGFyeT5cbiAgYXJlYUJlZm9yZUd1dHRlckluZGV4OiBudW1iZXJcbiAgYXJlYUFmdGVyR3V0dGVySW5kZXg6IG51bWJlclxufVxuXG5leHBvcnQgY29uc3QgU1BMSVRfQVJFQV9DT05UUkFDVCA9IG5ldyBJbmplY3Rpb25Ub2tlbjxTcGxpdEFyZWFDb21wb25lbnQ+KCdTcGxpdCBBcmVhIENvbnRyYWN0JylcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYXMtc3BsaXQnLFxuICBzdGFuZGFsb25lOiB0cnVlLFxuICBpbXBvcnRzOiBbTmdTdHlsZSwgU3BsaXRDdXN0b21FdmVudHNCZWhhdmlvckRpcmVjdGl2ZSwgU3BsaXRHdXR0ZXJEeW5hbWljSW5qZWN0b3JEaXJlY3RpdmUsIE5nVGVtcGxhdGVPdXRsZXRdLFxuICBleHBvcnRBczogJ2FzU3BsaXQnLFxuICB0ZW1wbGF0ZVVybDogJy4vc3BsaXQuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybDogJy4vc3BsaXQuY29tcG9uZW50LmNzcycsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxufSlcbmV4cG9ydCBjbGFzcyBTcGxpdENvbXBvbmVudCB7XG4gIHByaXZhdGUgcmVhZG9ubHkgZG9jdW1lbnQgPSBpbmplY3QoRE9DVU1FTlQpXG4gIHByaXZhdGUgcmVhZG9ubHkgcmVuZGVyZXIgPSBpbmplY3QoUmVuZGVyZXIyKVxuICBwcml2YXRlIHJlYWRvbmx5IGVsZW1lbnRSZWYgPSBpbmplY3Q8RWxlbWVudFJlZjxIVE1MRWxlbWVudD4+KEVsZW1lbnRSZWYpXG4gIHByaXZhdGUgcmVhZG9ubHkgbmdab25lID0gaW5qZWN0KE5nWm9uZSlcbiAgcHJpdmF0ZSByZWFkb25seSBkZWZhdWx0T3B0aW9ucyA9IGluamVjdChBTkdVTEFSX1NQTElUX0RFRkFVTFRfT1BUSU9OUylcblxuICBwcml2YXRlIHJlYWRvbmx5IGd1dHRlck1vdXNlRG93blN1YmplY3QgPSBuZXcgU3ViamVjdDxNb3VzZURvd25Db250ZXh0PigpXG4gIHByaXZhdGUgcmVhZG9ubHkgZHJhZ1Byb2dyZXNzU3ViamVjdCA9IG5ldyBTdWJqZWN0PFNwbGl0R3V0dGVySW50ZXJhY3Rpb25FdmVudD4oKVxuXG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHJlYWRvbmx5IF9hcmVhcyA9IGNvbnRlbnRDaGlsZHJlbihTUExJVF9BUkVBX0NPTlRSQUNUKVxuICBwcm90ZWN0ZWQgcmVhZG9ubHkgY3VzdG9tR3V0dGVyID0gY29udGVudENoaWxkKFNwbGl0R3V0dGVyRGlyZWN0aXZlKVxuICByZWFkb25seSBndXR0ZXJTaXplID0gaW5wdXQodGhpcy5kZWZhdWx0T3B0aW9ucy5ndXR0ZXJTaXplLCB7XG4gICAgdHJhbnNmb3JtOiBudW1iZXJBdHRyaWJ1dGVXaXRoRmFsbGJhY2sodGhpcy5kZWZhdWx0T3B0aW9ucy5ndXR0ZXJTaXplKSxcbiAgfSlcbiAgcmVhZG9ubHkgZ3V0dGVyU3RlcCA9IGlucHV0KHRoaXMuZGVmYXVsdE9wdGlvbnMuZ3V0dGVyU3RlcCwge1xuICAgIHRyYW5zZm9ybTogbnVtYmVyQXR0cmlidXRlV2l0aEZhbGxiYWNrKHRoaXMuZGVmYXVsdE9wdGlvbnMuZ3V0dGVyU3RlcCksXG4gIH0pXG4gIHJlYWRvbmx5IGRpc2FibGVkID0gaW5wdXQodGhpcy5kZWZhdWx0T3B0aW9ucy5kaXNhYmxlZCwgeyB0cmFuc2Zvcm06IGJvb2xlYW5BdHRyaWJ1dGUgfSlcbiAgcmVhZG9ubHkgZ3V0dGVyQ2xpY2tEZWx0YVB4ID0gaW5wdXQodGhpcy5kZWZhdWx0T3B0aW9ucy5ndXR0ZXJDbGlja0RlbHRhUHgsIHtcbiAgICB0cmFuc2Zvcm06IG51bWJlckF0dHJpYnV0ZVdpdGhGYWxsYmFjayh0aGlzLmRlZmF1bHRPcHRpb25zLmd1dHRlckNsaWNrRGVsdGFQeCksXG4gIH0pXG4gIHJlYWRvbmx5IGRpcmVjdGlvbiA9IGlucHV0KHRoaXMuZGVmYXVsdE9wdGlvbnMuZGlyZWN0aW9uKVxuICByZWFkb25seSBkaXIgPSBpbnB1dCh0aGlzLmRlZmF1bHRPcHRpb25zLmRpcilcbiAgcmVhZG9ubHkgdW5pdCA9IGlucHV0KHRoaXMuZGVmYXVsdE9wdGlvbnMudW5pdClcbiAgcmVhZG9ubHkgZ3V0dGVyQXJpYUxhYmVsID0gaW5wdXQ8c3RyaW5nPigpXG4gIHJlYWRvbmx5IHJlc3RyaWN0TW92ZSA9IGlucHV0KHRoaXMuZGVmYXVsdE9wdGlvbnMucmVzdHJpY3RNb3ZlLCB7IHRyYW5zZm9ybTogYm9vbGVhbkF0dHJpYnV0ZSB9KVxuICByZWFkb25seSB1c2VUcmFuc2l0aW9uID0gaW5wdXQodGhpcy5kZWZhdWx0T3B0aW9ucy51c2VUcmFuc2l0aW9uLCB7IHRyYW5zZm9ybTogYm9vbGVhbkF0dHJpYnV0ZSB9KVxuICByZWFkb25seSBndXR0ZXJEYmxDbGlja0R1cmF0aW9uID0gaW5wdXQodGhpcy5kZWZhdWx0T3B0aW9ucy5ndXR0ZXJEYmxDbGlja0R1cmF0aW9uLCB7XG4gICAgdHJhbnNmb3JtOiBudW1iZXJBdHRyaWJ1dGVXaXRoRmFsbGJhY2sodGhpcy5kZWZhdWx0T3B0aW9ucy5ndXR0ZXJEYmxDbGlja0R1cmF0aW9uKSxcbiAgfSlcbiAgcmVhZG9ubHkgZ3V0dGVyQ2xpY2sgPSBvdXRwdXQ8U3BsaXRHdXR0ZXJJbnRlcmFjdGlvbkV2ZW50PigpXG4gIHJlYWRvbmx5IGd1dHRlckRibENsaWNrID0gb3V0cHV0PFNwbGl0R3V0dGVySW50ZXJhY3Rpb25FdmVudD4oKVxuICByZWFkb25seSBkcmFnU3RhcnQgPSBvdXRwdXQ8U3BsaXRHdXR0ZXJJbnRlcmFjdGlvbkV2ZW50PigpXG4gIHJlYWRvbmx5IGRyYWdFbmQgPSBvdXRwdXQ8U3BsaXRHdXR0ZXJJbnRlcmFjdGlvbkV2ZW50PigpXG4gIHJlYWRvbmx5IHRyYW5zaXRpb25FbmQgPSBvdXRwdXQ8U3BsaXRBcmVhU2l6ZVtdPigpXG5cbiAgcmVhZG9ubHkgZHJhZ1Byb2dyZXNzJCA9IHRoaXMuZHJhZ1Byb2dyZXNzU3ViamVjdC5hc09ic2VydmFibGUoKVxuXG4gIHByaXZhdGUgcmVhZG9ubHkgdmlzaWJsZUFyZWFzID0gY29tcHV0ZWQoKCkgPT4gdGhpcy5fYXJlYXMoKS5maWx0ZXIoKGFyZWEpID0+IGFyZWEudmlzaWJsZSgpKSlcbiAgcHJpdmF0ZSByZWFkb25seSBncmlkVGVtcGxhdGVDb2x1bW5zU3R5bGUgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgY29uc3QgY29sdW1uczogc3RyaW5nW10gPSBbXVxuICAgIGNvbnN0IHN1bU5vbldpbGRjYXJkU2l6ZXMgPSBzdW0odGhpcy52aXNpYmxlQXJlYXMoKSwgKGFyZWEpID0+IHtcbiAgICAgIGNvbnN0IHNpemUgPSBhcmVhLl9pbnRlcm5hbFNpemUoKVxuICAgICAgcmV0dXJuIHNpemUgPT09ICcqJyA/IDAgOiBzaXplXG4gICAgfSlcbiAgICBjb25zdCB2aXNpYmxlQXJlYXNDb3VudCA9IHRoaXMudmlzaWJsZUFyZWFzKCkubGVuZ3RoXG5cbiAgICBsZXQgdmlzaXRlZFZpc2libGVBcmVhcyA9IDBcblxuICAgIHRoaXMuX2FyZWFzKCkuZm9yRWFjaCgoYXJlYSwgaW5kZXgsIGFyZWFzKSA9PiB7XG4gICAgICBjb25zdCB1bml0ID0gdGhpcy51bml0KClcbiAgICAgIGNvbnN0IGFyZWFTaXplID0gYXJlYS5faW50ZXJuYWxTaXplKClcblxuICAgICAgLy8gQWRkIGFyZWEgc2l6ZSBjb2x1bW5cbiAgICAgIGlmICghYXJlYS52aXNpYmxlKCkpIHtcbiAgICAgICAgY29sdW1ucy5wdXNoKHVuaXQgPT09ICdwZXJjZW50JyB8fCBhcmVhU2l6ZSA9PT0gJyonID8gJzBmcicgOiAnMHB4JylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh1bml0ID09PSAncGl4ZWwnKSB7XG4gICAgICAgICAgY29uc3QgY29sdW1uVmFsdWUgPSBhcmVhU2l6ZSA9PT0gJyonID8gJzFmcicgOiBgJHthcmVhU2l6ZX1weGBcbiAgICAgICAgICBjb2x1bW5zLnB1c2goY29sdW1uVmFsdWUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgcGVyY2VudFNpemUgPSBhcmVhU2l6ZSA9PT0gJyonID8gMTAwIC0gc3VtTm9uV2lsZGNhcmRTaXplcyA6IGFyZWFTaXplXG4gICAgICAgICAgY29uc3QgY29sdW1uVmFsdWUgPSBgJHtwZXJjZW50U2l6ZX1mcmBcbiAgICAgICAgICBjb2x1bW5zLnB1c2goY29sdW1uVmFsdWUpXG4gICAgICAgIH1cblxuICAgICAgICB2aXNpdGVkVmlzaWJsZUFyZWFzKytcbiAgICAgIH1cblxuICAgICAgY29uc3QgaXNMYXN0QXJlYSA9IGluZGV4ID09PSBhcmVhcy5sZW5ndGggLSAxXG5cbiAgICAgIGlmIChpc0xhc3RBcmVhKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCByZW1haW5pbmdWaXNpYmxlQXJlYXMgPSB2aXNpYmxlQXJlYXNDb3VudCAtIHZpc2l0ZWRWaXNpYmxlQXJlYXNcblxuICAgICAgLy8gT25seSBhZGQgZ3V0dGVyIHdpdGggc2l6ZSBpZiB0aGlzIGFyZWEgaXMgdmlzaWJsZSBhbmQgdGhlcmUgYXJlIG1vcmUgdmlzaWJsZSBhcmVhcyBhZnRlciB0aGlzIG9uZVxuICAgICAgLy8gdG8gYXZvaWQgZ2hvc3QgZ3V0dGVyc1xuICAgICAgaWYgKGFyZWEudmlzaWJsZSgpICYmIHJlbWFpbmluZ1Zpc2libGVBcmVhcyA+IDApIHtcbiAgICAgICAgY29sdW1ucy5wdXNoKGAke3RoaXMuZ3V0dGVyU2l6ZSgpfXB4YClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbHVtbnMucHVzaCgnMHB4JylcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uKCkgPT09ICdob3Jpem9udGFsJyA/IGAxZnIgLyAke2NvbHVtbnMuam9pbignICcpfWAgOiBgJHtjb2x1bW5zLmpvaW4oJyAnKX0gLyAxZnJgXG4gIH0pXG4gIHByaXZhdGUgcmVhZG9ubHkgaG9zdENsYXNzZXMgPSBjb21wdXRlZCgoKSA9PlxuICAgIGNyZWF0ZUNsYXNzZXNTdHJpbmcoe1xuICAgICAgW2Bhcy0ke3RoaXMuZGlyZWN0aW9uKCl9YF06IHRydWUsXG4gICAgICBbYGFzLSR7dGhpcy51bml0KCl9YF06IHRydWUsXG4gICAgICBbJ2FzLWRpc2FibGVkJ106IHRoaXMuZGlzYWJsZWQoKSxcbiAgICAgIFsnYXMtZHJhZ2dpbmcnXTogdGhpcy5faXNEcmFnZ2luZygpLFxuICAgICAgWydhcy10cmFuc2l0aW9uJ106IHRoaXMudXNlVHJhbnNpdGlvbigpICYmICF0aGlzLl9pc0RyYWdnaW5nKCksXG4gICAgfSksXG4gIClcbiAgcHJvdGVjdGVkIHJlYWRvbmx5IGRyYWdnZWRHdXR0ZXJJbmRleCA9IHNpZ25hbDxudW1iZXI+KHVuZGVmaW5lZClcbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcmVhZG9ubHkgX2lzRHJhZ2dpbmcgPSBjb21wdXRlZCgoKSA9PiB0aGlzLmRyYWdnZWRHdXR0ZXJJbmRleCgpICE9PSB1bmRlZmluZWQpXG5cbiAgQEhvc3RCaW5kaW5nKCdjbGFzcycpIHByb3RlY3RlZCBnZXQgaG9zdENsYXNzZXNCaW5kaW5nKCkge1xuICAgIHJldHVybiB0aGlzLmhvc3RDbGFzc2VzKClcbiAgfVxuXG4gIEBIb3N0QmluZGluZygnZGlyJykgcHJvdGVjdGVkIGdldCBob3N0RGlyQmluZGluZygpIHtcbiAgICByZXR1cm4gdGhpcy5kaXIoKVxuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgZWZmZWN0KFxuICAgICAgKCkgPT4ge1xuICAgICAgICBjb25zdCB2aXNpYmxlQXJlYXMgPSB0aGlzLnZpc2libGVBcmVhcygpXG4gICAgICAgIGNvbnN0IHVuaXQgPSB0aGlzLnVuaXQoKVxuICAgICAgICBjb25zdCBpc0luQXV0b01vZGUgPSB2aXNpYmxlQXJlYXMuZXZlcnkoKGFyZWEpID0+IGFyZWEuc2l6ZSgpID09PSAnYXV0bycpXG5cbiAgICAgICAgdW50cmFja2VkKCgpID0+IHtcbiAgICAgICAgICAvLyBTcGVjaWFsIG1vZGUgd2hlbiBubyBzaXplIGlucHV0IHdhcyBkZWNsYXJlZCB3aGljaCBpcyBhIHZhbGlkIG1vZGVcbiAgICAgICAgICBpZiAodW5pdCA9PT0gJ3BlcmNlbnQnICYmIHZpc2libGVBcmVhcy5sZW5ndGggPiAxICYmIGlzSW5BdXRvTW9kZSkge1xuICAgICAgICAgICAgdmlzaWJsZUFyZWFzLmZvckVhY2goKGFyZWEpID0+IGFyZWEuX2ludGVybmFsU2l6ZS5zZXQoMTAwIC8gdmlzaWJsZUFyZWFzLmxlbmd0aCkpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2aXNpYmxlQXJlYXMuZm9yRWFjaCgoYXJlYSkgPT4gYXJlYS5faW50ZXJuYWxTaXplLnJlc2V0KCkpXG5cbiAgICAgICAgICBjb25zdCBpc1ZhbGlkID0gYXJlQXJlYXNWYWxpZCh2aXNpYmxlQXJlYXMsIHVuaXQpXG5cbiAgICAgICAgICBpZiAoaXNWYWxpZCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHVuaXQgPT09ICdwZXJjZW50Jykge1xuICAgICAgICAgICAgLy8gRGlzdHJpYnV0ZSBzaXplcyBlcXVhbGx5XG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0U2l6ZSA9IDEwMCAvIHZpc2libGVBcmVhcy5sZW5ndGhcbiAgICAgICAgICAgIHZpc2libGVBcmVhcy5mb3JFYWNoKChhcmVhKSA9PiBhcmVhLl9pbnRlcm5hbFNpemUuc2V0KGRlZmF1bHRTaXplKSlcbiAgICAgICAgICB9IGVsc2UgaWYgKHVuaXQgPT09ICdwaXhlbCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHdpbGRjYXJkQXJlYXMgPSB2aXNpYmxlQXJlYXMuZmlsdGVyKChhcmVhKSA9PiBhcmVhLl9pbnRlcm5hbFNpemUoKSA9PT0gJyonKVxuXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgb25seSBvbmUgd2lsZGNhcmQgYXJlYVxuICAgICAgICAgICAgaWYgKHdpbGRjYXJkQXJlYXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgIHZpc2libGVBcmVhc1swXS5faW50ZXJuYWxTaXplLnNldCgnKicpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHdpbGRjYXJkQXJlYXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICB3aWxkY2FyZEFyZWFzLmZpbHRlcigoXywgaSkgPT4gaSAhPT0gMCkuZm9yRWFjaCgoYXJlYSkgPT4gYXJlYS5faW50ZXJuYWxTaXplLnNldCgxMDApKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICB7IGFsbG93U2lnbmFsV3JpdGVzOiB0cnVlIH0sXG4gICAgKVxuXG4gICAgLy8gUmVzcG9uc2libGUgZm9yIHVwZGF0aW5nIGdyaWQgdGVtcGxhdGUgc3R5bGUuIE11c3QgYmUgdGhpcyB3YXkgYW5kIG5vdCBiYXNlZCBvbiBIb3N0QmluZGluZ1xuICAgIC8vIGFzIGNoYW5nZSBkZXRlY3Rpb24gZm9yIGhvc3QgYmluZGluZyBpcyBib3VuZCB0byB0aGUgcGFyZW50IGNvbXBvbmVudCBhbmQgdGhpcyBzdHlsZVxuICAgIC8vIGlzIHVwZGF0ZWQgb24gZXZlcnkgbW91c2UgbW92ZS4gRG9pbmcgaXQgdGhpcyB3YXkgd2lsbCBwcmV2ZW50IGNoYW5nZSBkZXRlY3Rpb24gY3ljbGVzIGluIHBhcmVudC5cbiAgICBlZmZlY3QoKCkgPT4ge1xuICAgICAgY29uc3QgZ3JpZFRlbXBsYXRlQ29sdW1uc1N0eWxlID0gdGhpcy5ncmlkVGVtcGxhdGVDb2x1bW5zU3R5bGUoKVxuICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgJ2dyaWQtdGVtcGxhdGUnLCBncmlkVGVtcGxhdGVDb2x1bW5zU3R5bGUpXG4gICAgfSlcblxuICAgIHRoaXMuZ3V0dGVyTW91c2VEb3duU3ViamVjdFxuICAgICAgLnBpcGUoXG4gICAgICAgIGZpbHRlcihcbiAgICAgICAgICAoY29udGV4dCkgPT5cbiAgICAgICAgICAgICF0aGlzLmN1c3RvbUd1dHRlcigpIHx8XG4gICAgICAgICAgICB0aGlzLmN1c3RvbUd1dHRlcigpLmNhblN0YXJ0RHJhZ2dpbmcoY29udGV4dC5tb3VzZURvd25FdmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQsIGNvbnRleHQuZ3V0dGVySW5kZXggKyAxKSxcbiAgICAgICAgKSxcbiAgICAgICAgc3dpdGNoTWFwKChtb3VzZURvd25Db250ZXh0KSA9PlxuICAgICAgICAgIC8vIEFzIHdlIGhhdmUgZ3V0dGVyQ2xpY2tEZWx0YVB4IHdlIGNhbid0IGp1c3Qgc3RhcnQgdGhlIGRyYWcgYnV0IG5lZWQgdG8gbWFrZSBzdXJlXG4gICAgICAgICAgLy8gd2UgYXJlIG91dCBvZiB0aGUgZGVsdGEgcGl4ZWxzLiBBcyB0aGUgZGVsdGEgY2FuIGJlIGFueSBudW1iZXIgd2UgbWFrZSBzdXJlXG4gICAgICAgICAgLy8gd2UgYWx3YXlzIHN0YXJ0IHRoZSBkcmFnIGlmIHdlIGdvIG91dCBvZiB0aGUgZ3V0dGVyIChkZWx0YSBiYXNlZCBvbiBtb3VzZSBwb3NpdGlvbiBpcyBsYXJnZXIgdGhhbiBndXR0ZXIpLlxuICAgICAgICAgIC8vIEFzIG1vdmluZyBjYW4gc3RhcnQgaW5zaWRlIHRoZSBkcmFnIGFuZCBlbmQgb3V0c2lkZSBvZiBpdCB3ZSBhbHdheXMga2VlcCB0cmFjayBvZiB0aGUgcHJldmlvdXMgZXZlbnRcbiAgICAgICAgICAvLyBzbyBvbmNlIHRoZSBjdXJyZW50IGlzIG91dCBvZiB0aGUgZGVsdGEgc2l6ZSB3ZSB1c2UgdGhlIHByZXZpb3VzIG9uZSBhcyB0aGUgZHJhZyBzdGFydCBiYXNlbGluZS5cbiAgICAgICAgICBmcm9tTW91c2VNb3ZlRXZlbnQodGhpcy5kb2N1bWVudCkucGlwZShcbiAgICAgICAgICAgIHN0YXJ0V2l0aChtb3VzZURvd25Db250ZXh0Lm1vdXNlRG93bkV2ZW50KSxcbiAgICAgICAgICAgIHBhaXJ3aXNlKCksXG4gICAgICAgICAgICBza2lwV2hpbGUoKFssIGN1cnJNb3ZlRXZlbnRdKSA9PlxuICAgICAgICAgICAgICBndXR0ZXJFdmVudHNFcXVhbFdpdGhEZWx0YShcbiAgICAgICAgICAgICAgICBtb3VzZURvd25Db250ZXh0Lm1vdXNlRG93bkV2ZW50LFxuICAgICAgICAgICAgICAgIGN1cnJNb3ZlRXZlbnQsXG4gICAgICAgICAgICAgICAgdGhpcy5ndXR0ZXJDbGlja0RlbHRhUHgoKSxcbiAgICAgICAgICAgICAgICBtb3VzZURvd25Db250ZXh0Lmd1dHRlckVsZW1lbnQsXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgdGFrZSgxKSxcbiAgICAgICAgICAgIHRha2VVbnRpbChmcm9tTW91c2VVcEV2ZW50KHRoaXMuZG9jdW1lbnQsIHRydWUpKSxcbiAgICAgICAgICAgIHRhcCgoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmFnU3RhcnQuZW1pdCh0aGlzLmNyZWF0ZURyYWdJbnRlcmFjdGlvbkV2ZW50KG1vdXNlRG93bkNvbnRleHQuZ3V0dGVySW5kZXgpKVxuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ2dlZEd1dHRlckluZGV4LnNldChtb3VzZURvd25Db250ZXh0Lmd1dHRlckluZGV4KVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBtYXAoKFtwcmV2TW91c2VFdmVudF0pID0+XG4gICAgICAgICAgICAgIHRoaXMuY3JlYXRlRHJhZ1N0YXJ0Q29udGV4dChcbiAgICAgICAgICAgICAgICBwcmV2TW91c2VFdmVudCxcbiAgICAgICAgICAgICAgICBtb3VzZURvd25Db250ZXh0LmFyZWFCZWZvcmVHdXR0ZXJJbmRleCxcbiAgICAgICAgICAgICAgICBtb3VzZURvd25Db250ZXh0LmFyZWFBZnRlckd1dHRlckluZGV4LFxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHN3aXRjaE1hcCgoZHJhZ1N0YXJ0Q29udGV4dCkgPT5cbiAgICAgICAgICAgICAgZnJvbU1vdXNlTW92ZUV2ZW50KHRoaXMuZG9jdW1lbnQpLnBpcGUoXG4gICAgICAgICAgICAgICAgdGFwKChtb3ZlRXZlbnQpID0+IHRoaXMubW91c2VEcmFnTW92ZShtb3ZlRXZlbnQsIGRyYWdTdGFydENvbnRleHQpKSxcbiAgICAgICAgICAgICAgICB0YWtlVW50aWwoZnJvbU1vdXNlVXBFdmVudCh0aGlzLmRvY3VtZW50LCB0cnVlKSksXG4gICAgICAgICAgICAgICAgdGFwKHtcbiAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiAoKSA9PlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhZ0VuZC5lbWl0KHRoaXMuY3JlYXRlRHJhZ0ludGVyYWN0aW9uRXZlbnQodGhpcy5kcmFnZ2VkR3V0dGVySW5kZXgoKSkpXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmFnZ2VkR3V0dGVySW5kZXguc2V0KHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICApLFxuICAgICAgICAgICksXG4gICAgICAgICksXG4gICAgICAgIHRha2VVbnRpbERlc3Ryb3llZCgpLFxuICAgICAgKVxuICAgICAgLnN1YnNjcmliZSgpXG5cbiAgICBmcm9tRXZlbnQ8VHJhbnNpdGlvbkV2ZW50Pih0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgJ3RyYW5zaXRpb25lbmQnKVxuICAgICAgLnBpcGUoXG4gICAgICAgIGZpbHRlcigoZSkgPT4gZS5wcm9wZXJ0eU5hbWUuc3RhcnRzV2l0aCgnZ3JpZC10ZW1wbGF0ZScpKSxcbiAgICAgICAgbGVhdmVOZ1pvbmUoKSxcbiAgICAgICAgdGFrZVVudGlsRGVzdHJveWVkKCksXG4gICAgICApXG4gICAgICAuc3Vic2NyaWJlKCgpID0+IHRoaXMubmdab25lLnJ1bigoKSA9PiB0aGlzLnRyYW5zaXRpb25FbmQuZW1pdCh0aGlzLmNyZWF0ZUFyZWFTaXplcygpKSkpXG4gIH1cblxuICBwcm90ZWN0ZWQgZ3V0dGVyQ2xpY2tlZChndXR0ZXJJbmRleDogbnVtYmVyKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHRoaXMuZ3V0dGVyQ2xpY2suZW1pdCh0aGlzLmNyZWF0ZURyYWdJbnRlcmFjdGlvbkV2ZW50KGd1dHRlckluZGV4KSkpXG4gIH1cblxuICBwcm90ZWN0ZWQgZ3V0dGVyRG91YmxlQ2xpY2tlZChndXR0ZXJJbmRleDogbnVtYmVyKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHRoaXMuZ3V0dGVyRGJsQ2xpY2suZW1pdCh0aGlzLmNyZWF0ZURyYWdJbnRlcmFjdGlvbkV2ZW50KGd1dHRlckluZGV4KSkpXG4gIH1cblxuICBwcm90ZWN0ZWQgZ3V0dGVyTW91c2VEb3duKFxuICAgIGU6IE1vdXNlRXZlbnQgfCBUb3VjaEV2ZW50LFxuICAgIGd1dHRlckVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIGd1dHRlckluZGV4OiBudW1iZXIsXG4gICAgYXJlYUJlZm9yZUd1dHRlckluZGV4OiBudW1iZXIsXG4gICAgYXJlYUFmdGVyR3V0dGVySW5kZXg6IG51bWJlcixcbiAgKSB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQoKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgdGhpcy5ndXR0ZXJNb3VzZURvd25TdWJqZWN0Lm5leHQoe1xuICAgICAgbW91c2VEb3duRXZlbnQ6IGUsXG4gICAgICBndXR0ZXJFbGVtZW50LFxuICAgICAgZ3V0dGVySW5kZXgsXG4gICAgICBhcmVhQmVmb3JlR3V0dGVySW5kZXgsXG4gICAgICBhcmVhQWZ0ZXJHdXR0ZXJJbmRleCxcbiAgICB9KVxuICB9XG5cbiAgcHJvdGVjdGVkIGd1dHRlcktleURvd24oXG4gICAgZTogS2V5Ym9hcmRFdmVudCxcbiAgICBndXR0ZXJJbmRleDogbnVtYmVyLFxuICAgIGFyZWFCZWZvcmVHdXR0ZXJJbmRleDogbnVtYmVyLFxuICAgIGFyZWFBZnRlckd1dHRlckluZGV4OiBudW1iZXIsXG4gICkge1xuICAgIGlmICh0aGlzLmRpc2FibGVkKCkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHBpeGVsc1RvTW92ZSA9IDUwXG4gICAgY29uc3QgcGFnZU1vdmVNdWx0aXBsaWVyID0gMTBcblxuICAgIGxldCB4UG9pbnRPZmZzZXQgPSAwXG4gICAgbGV0IHlQb2ludE9mZnNldCA9IDBcblxuICAgIGlmICh0aGlzLmRpcmVjdGlvbigpID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgIC8vIEV2ZW4gdGhvdWdoIHdlIGFyZSBnb2luZyBpbiB0aGUgeCBheGlzIHdlIHN1cHBvcnQgcGFnZSB1cCBhbmQgZG93blxuICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICBjYXNlICdBcnJvd0xlZnQnOlxuICAgICAgICAgIHhQb2ludE9mZnNldCAtPSBwaXhlbHNUb01vdmVcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdBcnJvd1JpZ2h0JzpcbiAgICAgICAgICB4UG9pbnRPZmZzZXQgKz0gcGl4ZWxzVG9Nb3ZlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnUGFnZVVwJzpcbiAgICAgICAgICBpZiAodGhpcy5kaXIoKSA9PT0gJ3J0bCcpIHtcbiAgICAgICAgICAgIHhQb2ludE9mZnNldCAtPSBwaXhlbHNUb01vdmUgKiBwYWdlTW92ZU11bHRpcGxpZXJcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgeFBvaW50T2Zmc2V0ICs9IHBpeGVsc1RvTW92ZSAqIHBhZ2VNb3ZlTXVsdGlwbGllclxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdQYWdlRG93bic6XG4gICAgICAgICAgaWYgKHRoaXMuZGlyKCkgPT09ICdydGwnKSB7XG4gICAgICAgICAgICB4UG9pbnRPZmZzZXQgKz0gcGl4ZWxzVG9Nb3ZlICogcGFnZU1vdmVNdWx0aXBsaWVyXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHhQb2ludE9mZnNldCAtPSBwaXhlbHNUb01vdmUgKiBwYWdlTW92ZU11bHRpcGxpZXJcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICBjYXNlICdBcnJvd1VwJzpcbiAgICAgICAgICB5UG9pbnRPZmZzZXQgLT0gcGl4ZWxzVG9Nb3ZlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnQXJyb3dEb3duJzpcbiAgICAgICAgICB5UG9pbnRPZmZzZXQgKz0gcGl4ZWxzVG9Nb3ZlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnUGFnZVVwJzpcbiAgICAgICAgICB5UG9pbnRPZmZzZXQgLT0gcGl4ZWxzVG9Nb3ZlICogcGFnZU1vdmVNdWx0aXBsaWVyXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnUGFnZURvd24nOlxuICAgICAgICAgIHlQb2ludE9mZnNldCArPSBwaXhlbHNUb01vdmUgKiBwYWdlTW92ZU11bHRpcGxpZXJcbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVyblxuICAgICAgfVxuICAgIH1cblxuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgIGNvbnN0IGd1dHRlck1pZFBvaW50ID0gZ2V0UG9pbnRGcm9tRXZlbnQoZSlcbiAgICBjb25zdCBkcmFnU3RhcnRDb250ZXh0ID0gdGhpcy5jcmVhdGVEcmFnU3RhcnRDb250ZXh0KGUsIGFyZWFCZWZvcmVHdXR0ZXJJbmRleCwgYXJlYUFmdGVyR3V0dGVySW5kZXgpXG5cbiAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgdGhpcy5kcmFnU3RhcnQuZW1pdCh0aGlzLmNyZWF0ZURyYWdJbnRlcmFjdGlvbkV2ZW50KGd1dHRlckluZGV4KSlcbiAgICAgIHRoaXMuZHJhZ2dlZEd1dHRlckluZGV4LnNldChndXR0ZXJJbmRleClcbiAgICB9KVxuXG4gICAgdGhpcy5kcmFnTW92ZVRvUG9pbnQoeyB4OiBndXR0ZXJNaWRQb2ludC54ICsgeFBvaW50T2Zmc2V0LCB5OiBndXR0ZXJNaWRQb2ludC55ICsgeVBvaW50T2Zmc2V0IH0sIGRyYWdTdGFydENvbnRleHQpXG5cbiAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgdGhpcy5kcmFnRW5kLmVtaXQodGhpcy5jcmVhdGVEcmFnSW50ZXJhY3Rpb25FdmVudChndXR0ZXJJbmRleCkpXG4gICAgICB0aGlzLmRyYWdnZWRHdXR0ZXJJbmRleC5zZXQodW5kZWZpbmVkKVxuICAgIH0pXG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0R3V0dGVyR3JpZFN0eWxlKG5leHRBcmVhSW5kZXg6IG51bWJlcikge1xuICAgIGNvbnN0IGd1dHRlck51bSA9IG5leHRBcmVhSW5kZXggKiAyXG4gICAgY29uc3Qgc3R5bGUgPSBgJHtndXR0ZXJOdW19IC8gJHtndXR0ZXJOdW19YFxuXG4gICAgcmV0dXJuIHtcbiAgICAgIFsnZ3JpZC1jb2x1bW4nXTogdGhpcy5kaXJlY3Rpb24oKSA9PT0gJ2hvcml6b250YWwnID8gc3R5bGUgOiAnMScsXG4gICAgICBbJ2dyaWQtcm93J106IHRoaXMuZGlyZWN0aW9uKCkgPT09ICd2ZXJ0aWNhbCcgPyBzdHlsZSA6ICcxJyxcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0QXJpYUFyZWFTaXplVGV4dChhcmVhOiBTcGxpdEFyZWFDb21wb25lbnQpOiBzdHJpbmcge1xuICAgIGNvbnN0IHNpemUgPSBhcmVhLl9pbnRlcm5hbFNpemUoKVxuXG4gICAgaWYgKHNpemUgPT09ICcqJykge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cblxuICAgIHJldHVybiBgJHtzaXplLnRvRml4ZWQoMCl9ICR7dGhpcy51bml0KCl9YFxuICB9XG5cbiAgcHJvdGVjdGVkIGdldEFyaWFWYWx1ZShzaXplOiBTcGxpdEFyZWFTaXplKSB7XG4gICAgcmV0dXJuIHNpemUgPT09ICcqJyA/IHVuZGVmaW5lZCA6IHNpemVcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlRHJhZ0ludGVyYWN0aW9uRXZlbnQoZ3V0dGVySW5kZXg6IG51bWJlcik6IFNwbGl0R3V0dGVySW50ZXJhY3Rpb25FdmVudCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGd1dHRlck51bTogZ3V0dGVySW5kZXggKyAxLFxuICAgICAgc2l6ZXM6IHRoaXMuY3JlYXRlQXJlYVNpemVzKCksXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVBcmVhU2l6ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMudmlzaWJsZUFyZWFzKCkubWFwKChhcmVhKSA9PiBhcmVhLl9pbnRlcm5hbFNpemUoKSlcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlRHJhZ1N0YXJ0Q29udGV4dChcbiAgICBzdGFydEV2ZW50OiBNb3VzZUV2ZW50IHwgVG91Y2hFdmVudCB8IEtleWJvYXJkRXZlbnQsXG4gICAgYXJlYUJlZm9yZUd1dHRlckluZGV4OiBudW1iZXIsXG4gICAgYXJlYUFmdGVyR3V0dGVySW5kZXg6IG51bWJlcixcbiAgKTogRHJhZ1N0YXJ0Q29udGV4dCB7XG4gICAgY29uc3Qgc3BsaXRCb3VuZGluZ1JlY3QgPSB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIGNvbnN0IHNwbGl0U2l6ZSA9IHRoaXMuZGlyZWN0aW9uKCkgPT09ICdob3Jpem9udGFsJyA/IHNwbGl0Qm91bmRpbmdSZWN0LndpZHRoIDogc3BsaXRCb3VuZGluZ1JlY3QuaGVpZ2h0XG4gICAgY29uc3QgdG90YWxBcmVhc1BpeGVsU2l6ZSA9IHNwbGl0U2l6ZSAtICh0aGlzLnZpc2libGVBcmVhcygpLmxlbmd0aCAtIDEpICogdGhpcy5ndXR0ZXJTaXplKClcbiAgICAvLyBVc2UgdGhlIGludGVybmFsIHNpemUgYW5kIHNwbGl0IHNpemUgdG8gY2FsY3VsYXRlIHRoZSBwaXhlbCBzaXplIGZyb20gd2lsZGNhcmQgYW5kIHBlcmNlbnQgYXJlYXNcbiAgICBjb25zdCBhcmVhUGl4ZWxTaXplc1dpdGhXaWxkY2FyZCA9IHRoaXMuX2FyZWFzKCkubWFwKChhcmVhKSA9PiB7XG4gICAgICBpZiAodGhpcy51bml0KCkgPT09ICdwaXhlbCcpIHtcbiAgICAgICAgcmV0dXJuIGFyZWEuX2ludGVybmFsU2l6ZSgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzaXplID0gYXJlYS5faW50ZXJuYWxTaXplKClcblxuICAgICAgICBpZiAoc2l6ZSA9PT0gJyonKSB7XG4gICAgICAgICAgcmV0dXJuIHNpemVcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoc2l6ZSAvIDEwMCkgKiB0b3RhbEFyZWFzUGl4ZWxTaXplXG4gICAgICB9XG4gICAgfSlcbiAgICBjb25zdCByZW1haW5pbmdTaXplID0gTWF0aC5tYXgoXG4gICAgICAwLFxuICAgICAgdG90YWxBcmVhc1BpeGVsU2l6ZSAtIHN1bShhcmVhUGl4ZWxTaXplc1dpdGhXaWxkY2FyZCwgKHNpemUpID0+IChzaXplID09PSAnKicgPyAwIDogc2l6ZSkpLFxuICAgIClcbiAgICBjb25zdCBhcmVhc1BpeGVsU2l6ZXMgPSBhcmVhUGl4ZWxTaXplc1dpdGhXaWxkY2FyZC5tYXAoKHNpemUpID0+IChzaXplID09PSAnKicgPyByZW1haW5pbmdTaXplIDogc2l6ZSkpXG5cbiAgICByZXR1cm4ge1xuICAgICAgc3RhcnRFdmVudCxcbiAgICAgIGFyZWFCZWZvcmVHdXR0ZXJJbmRleCxcbiAgICAgIGFyZWFBZnRlckd1dHRlckluZGV4LFxuICAgICAgYXJlYXNQaXhlbFNpemVzLFxuICAgICAgdG90YWxBcmVhc1BpeGVsU2l6ZSxcbiAgICAgIGFyZWFJbmRleFRvQm91bmRhcmllczogdG9SZWNvcmQodGhpcy5fYXJlYXMoKSwgKGFyZWEsIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IHBlcmNlbnRUb1BpeGVscyA9IChwZXJjZW50OiBudW1iZXIpID0+IChwZXJjZW50IC8gMTAwKSAqIHRvdGFsQXJlYXNQaXhlbFNpemVcblxuICAgICAgICBjb25zdCB2YWx1ZTogQXJlYUJvdW5kYXJ5ID1cbiAgICAgICAgICB0aGlzLnVuaXQoKSA9PT0gJ3BpeGVsJ1xuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgbWluOiBhcmVhLl9ub3JtYWxpemVkTWluU2l6ZSgpLFxuICAgICAgICAgICAgICAgIG1heDogYXJlYS5fbm9ybWFsaXplZE1heFNpemUoKSxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgbWluOiBwZXJjZW50VG9QaXhlbHMoYXJlYS5fbm9ybWFsaXplZE1pblNpemUoKSksXG4gICAgICAgICAgICAgICAgbWF4OiBwZXJjZW50VG9QaXhlbHMoYXJlYS5fbm9ybWFsaXplZE1heFNpemUoKSksXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICByZXR1cm4gW2luZGV4LnRvU3RyaW5nKCksIHZhbHVlXVxuICAgICAgfSksXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBtb3VzZURyYWdNb3ZlKG1vdmVFdmVudDogTW91c2VFdmVudCB8IFRvdWNoRXZlbnQsIGRyYWdTdGFydENvbnRleHQ6IERyYWdTdGFydENvbnRleHQpIHtcbiAgICBtb3ZlRXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIG1vdmVFdmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgY29uc3QgZW5kUG9pbnQgPSBnZXRQb2ludEZyb21FdmVudChtb3ZlRXZlbnQpXG5cbiAgICB0aGlzLmRyYWdNb3ZlVG9Qb2ludChlbmRQb2ludCwgZHJhZ1N0YXJ0Q29udGV4dClcbiAgfVxuXG4gIHByaXZhdGUgZHJhZ01vdmVUb1BvaW50KGVuZFBvaW50OiBDbGllbnRQb2ludCwgZHJhZ1N0YXJ0Q29udGV4dDogRHJhZ1N0YXJ0Q29udGV4dCkge1xuICAgIGNvbnN0IHN0YXJ0UG9pbnQgPSBnZXRQb2ludEZyb21FdmVudChkcmFnU3RhcnRDb250ZXh0LnN0YXJ0RXZlbnQpXG4gICAgY29uc3QgcHJlRGlyT2Zmc2V0ID0gdGhpcy5kaXJlY3Rpb24oKSA9PT0gJ2hvcml6b250YWwnID8gZW5kUG9pbnQueCAtIHN0YXJ0UG9pbnQueCA6IGVuZFBvaW50LnkgLSBzdGFydFBvaW50LnlcbiAgICBjb25zdCBvZmZzZXQgPSB0aGlzLmRpcmVjdGlvbigpID09PSAnaG9yaXpvbnRhbCcgJiYgdGhpcy5kaXIoKSA9PT0gJ3J0bCcgPyAtcHJlRGlyT2Zmc2V0IDogcHJlRGlyT2Zmc2V0XG4gICAgY29uc3QgaXNEcmFnZ2luZ0ZvcndhcmQgPSBvZmZzZXQgPiAwXG4gICAgLy8gQWxpZ24gb2Zmc2V0IHdpdGggZ3V0dGVyIHN0ZXAgYW5kIGFicyBpdCBhcyB3ZSBuZWVkIGFic29sdXRlIHBpeGVscyBtb3ZlbWVudFxuICAgIGNvbnN0IGFic1N0ZXBwZWRPZmZzZXQgPSBNYXRoLmFicyhNYXRoLnJvdW5kKG9mZnNldCAvIHRoaXMuZ3V0dGVyU3RlcCgpKSAqIHRoaXMuZ3V0dGVyU3RlcCgpKVxuICAgIC8vIENvcHkgYXMgd2UgZG9uJ3Qgd2FudCB0byBlZGl0IHRoZSBvcmlnaW5hbCBhcnJheVxuICAgIGNvbnN0IHRlbXBBcmVhc1BpeGVsU2l6ZXMgPSBbLi4uZHJhZ1N0YXJ0Q29udGV4dC5hcmVhc1BpeGVsU2l6ZXNdXG4gICAgLy8gQXMgd2UgYXJlIGdvaW5nIHRvIHNodWZmbGUgdGhlIGFyZWFzIG9yZGVyIGZvciBlYXNpZXIgaXRlcmF0aW9ucyB3ZSBzaG91bGQgd29yayB3aXRoIGFyZWEgaW5kaWNlcyBhcnJheVxuICAgIC8vIGluc3RlYWQgb2YgYWN0dWFsIGFyZWEgc2l6ZXMgYXJyYXkuXG4gICAgY29uc3QgYXJlYXNJbmRpY2VzID0gdGVtcEFyZWFzUGl4ZWxTaXplcy5tYXAoKF8sIGluZGV4KSA9PiBpbmRleClcbiAgICAvLyBUaGUgdHdvIHZhcmlhYmxlcyBiZWxvdyBhcmUgb3JkZXJlZCBmb3IgaXRlcmF0aW9ucyB3aXRoIHJlYWwgYXJlYSBpbmRpY2VzIGluc2lkZS5cbiAgICAvLyBXZSBtdXN0IGFsc28gcmVtb3ZlIHRoZSBpbnZpc2libGUgb25lcyBhcyB3ZSBjYW4ndCBleHBhbmQgb3Igc2hyaW5rIHRoZW0uXG4gICAgY29uc3QgYXJlYXNJbmRpY2VzQmVmb3JlR3V0dGVyID0gdGhpcy5yZXN0cmljdE1vdmUoKVxuICAgICAgPyBbZHJhZ1N0YXJ0Q29udGV4dC5hcmVhQmVmb3JlR3V0dGVySW5kZXhdXG4gICAgICA6IGFyZWFzSW5kaWNlc1xuICAgICAgICAgIC5zbGljZSgwLCBkcmFnU3RhcnRDb250ZXh0LmFyZWFCZWZvcmVHdXR0ZXJJbmRleCArIDEpXG4gICAgICAgICAgLmZpbHRlcigoaW5kZXgpID0+IHRoaXMuX2FyZWFzKClbaW5kZXhdLnZpc2libGUoKSlcbiAgICAgICAgICAucmV2ZXJzZSgpXG4gICAgY29uc3QgYXJlYXNJbmRpY2VzQWZ0ZXJHdXR0ZXIgPSB0aGlzLnJlc3RyaWN0TW92ZSgpXG4gICAgICA/IFtkcmFnU3RhcnRDb250ZXh0LmFyZWFBZnRlckd1dHRlckluZGV4XVxuICAgICAgOiBhcmVhc0luZGljZXMuc2xpY2UoZHJhZ1N0YXJ0Q29udGV4dC5hcmVhQWZ0ZXJHdXR0ZXJJbmRleCkuZmlsdGVyKChpbmRleCkgPT4gdGhpcy5fYXJlYXMoKVtpbmRleF0udmlzaWJsZSgpKVxuICAgIC8vIEJhc2VkIG9uIGRpcmVjdGlvbiB3ZSBuZWVkIHRvIGRlY2lkZSB3aGljaCBhcmVhcyBhcmUgZXhwYW5kaW5nIGFuZCB3aGljaCBhcmUgc2hyaW5raW5nXG4gICAgY29uc3QgcG90ZW50aWFsQXJlYXNJbmRpY2VzQXJyVG9TaHJpbmsgPSBpc0RyYWdnaW5nRm9yd2FyZCA/IGFyZWFzSW5kaWNlc0FmdGVyR3V0dGVyIDogYXJlYXNJbmRpY2VzQmVmb3JlR3V0dGVyXG4gICAgY29uc3QgcG90ZW50aWFsQXJlYXNJbmRpY2VzQXJyVG9FeHBhbmQgPSBpc0RyYWdnaW5nRm9yd2FyZCA/IGFyZWFzSW5kaWNlc0JlZm9yZUd1dHRlciA6IGFyZWFzSW5kaWNlc0FmdGVyR3V0dGVyXG5cbiAgICBsZXQgcmVtYWluaW5nUGl4ZWxzID0gYWJzU3RlcHBlZE9mZnNldFxuICAgIGxldCBwb3RlbnRpYWxTaHJpbmtBcnJJbmRleCA9IDBcbiAgICBsZXQgcG90ZW50aWFsRXhwYW5kQXJySW5kZXggPSAwXG5cbiAgICAvLyBXZSBncmFkdWFsbHkgcnVuIGluIGJvdGggZXhwYW5kIGFuZCBzaHJpbmsgZGlyZWN0aW9uIHRyYW5zZmVycmluZyBwaXhlbHMgZnJvbSB0aGUgb2Zmc2V0LlxuICAgIC8vIFdlIHN0b3Agb25jZSBubyBwaXhlbHMgYXJlIGxlZnQgb3Igd2UgcmVhY2hlZCB0aGUgZW5kIG9mIGVpdGhlciB0aGUgZXhwYW5kaW5nIGFyZWFzIG9yIHRoZSBzaHJpbmtpbmcgYXJlYXNcbiAgICB3aGlsZSAoXG4gICAgICByZW1haW5pbmdQaXhlbHMgIT09IDAgJiZcbiAgICAgIHBvdGVudGlhbFNocmlua0FyckluZGV4IDwgcG90ZW50aWFsQXJlYXNJbmRpY2VzQXJyVG9TaHJpbmsubGVuZ3RoICYmXG4gICAgICBwb3RlbnRpYWxFeHBhbmRBcnJJbmRleCA8IHBvdGVudGlhbEFyZWFzSW5kaWNlc0FyclRvRXhwYW5kLmxlbmd0aFxuICAgICkge1xuICAgICAgY29uc3QgYXJlYUluZGV4VG9TaHJpbmsgPSBwb3RlbnRpYWxBcmVhc0luZGljZXNBcnJUb1Nocmlua1twb3RlbnRpYWxTaHJpbmtBcnJJbmRleF1cbiAgICAgIGNvbnN0IGFyZWFJbmRleFRvRXhwYW5kID0gcG90ZW50aWFsQXJlYXNJbmRpY2VzQXJyVG9FeHBhbmRbcG90ZW50aWFsRXhwYW5kQXJySW5kZXhdXG4gICAgICBjb25zdCBhcmVhVG9TaHJpbmtTaXplID0gdGVtcEFyZWFzUGl4ZWxTaXplc1thcmVhSW5kZXhUb1Nocmlua11cbiAgICAgIGNvbnN0IGFyZWFUb0V4cGFuZFNpemUgPSB0ZW1wQXJlYXNQaXhlbFNpemVzW2FyZWFJbmRleFRvRXhwYW5kXVxuICAgICAgY29uc3QgYXJlYVRvU2hyaW5rTWluU2l6ZSA9IGRyYWdTdGFydENvbnRleHQuYXJlYUluZGV4VG9Cb3VuZGFyaWVzW2FyZWFJbmRleFRvU2hyaW5rXS5taW5cbiAgICAgIGNvbnN0IGFyZWFUb0V4cGFuZE1heFNpemUgPSBkcmFnU3RhcnRDb250ZXh0LmFyZWFJbmRleFRvQm91bmRhcmllc1thcmVhSW5kZXhUb0V4cGFuZF0ubWF4XG4gICAgICAvLyBXZSBjYW4gb25seSB0cmFuc2ZlciBwaXhlbHMgYmFzZWQgb24gdGhlIHNocmlua2luZyBhcmVhIG1pbiBzaXplIGFuZCB0aGUgZXhwYW5kaW5nIGFyZWEgbWF4IHNpemVcbiAgICAgIC8vIHRvIGF2b2lkIG92ZXJmbG93LiBJZiBhbnkgcGl4ZWxzIGxlZnQgdGhleSB3aWxsIGJlIGhhbmRsZWQgYnkgdGhlIG5leHQgYXJlYSBpbiB0aGUgbmV4dCBgd2hpbGVgIGl0ZXJhdGlvblxuICAgICAgY29uc3QgbWF4UGl4ZWxzVG9TaHJpbmsgPSBhcmVhVG9TaHJpbmtTaXplIC0gYXJlYVRvU2hyaW5rTWluU2l6ZVxuICAgICAgY29uc3QgbWF4UGl4ZWxzVG9FeHBhbmQgPSBhcmVhVG9FeHBhbmRNYXhTaXplIC0gYXJlYVRvRXhwYW5kU2l6ZVxuICAgICAgY29uc3QgcGl4ZWxzVG9UcmFuc2ZlciA9IE1hdGgubWluKG1heFBpeGVsc1RvU2hyaW5rLCBtYXhQaXhlbHNUb0V4cGFuZCwgcmVtYWluaW5nUGl4ZWxzKVxuXG4gICAgICAvLyBBY3R1YWwgcGl4ZWxzIHRyYW5zZmVyXG4gICAgICB0ZW1wQXJlYXNQaXhlbFNpemVzW2FyZWFJbmRleFRvU2hyaW5rXSAtPSBwaXhlbHNUb1RyYW5zZmVyXG4gICAgICB0ZW1wQXJlYXNQaXhlbFNpemVzW2FyZWFJbmRleFRvRXhwYW5kXSArPSBwaXhlbHNUb1RyYW5zZmVyXG4gICAgICByZW1haW5pbmdQaXhlbHMgLT0gcGl4ZWxzVG9UcmFuc2ZlclxuXG4gICAgICAvLyBPbmNlIG1pbiB0aHJlc2hvbGQgcmVhY2hlZCB3ZSBuZWVkIHRvIG1vdmUgdG8gdGhlIG5leHQgYXJlYSBpbiB0dXJuXG4gICAgICBpZiAodGVtcEFyZWFzUGl4ZWxTaXplc1thcmVhSW5kZXhUb1Nocmlua10gPT09IGFyZWFUb1Nocmlua01pblNpemUpIHtcbiAgICAgICAgcG90ZW50aWFsU2hyaW5rQXJySW5kZXgrK1xuICAgICAgfVxuXG4gICAgICAvLyBPbmNlIG1heCB0aHJlc2hvbGQgcmVhY2hlZCB3ZSBuZWVkIHRvIG1vdmUgdG8gdGhlIG5leHQgYXJlYSBpbiB0dXJuXG4gICAgICBpZiAodGVtcEFyZWFzUGl4ZWxTaXplc1thcmVhSW5kZXhUb0V4cGFuZF0gPT09IGFyZWFUb0V4cGFuZE1heFNpemUpIHtcbiAgICAgICAgcG90ZW50aWFsRXhwYW5kQXJySW5kZXgrK1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2FyZWFzKCkuZm9yRWFjaCgoYXJlYSwgaW5kZXgpID0+IHtcbiAgICAgIC8vIE5vIG5lZWQgdG8gdXBkYXRlIHdpbGRjYXJkIHNpemVcbiAgICAgIGlmIChhcmVhLl9pbnRlcm5hbFNpemUoKSA9PT0gJyonKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy51bml0KCkgPT09ICdwaXhlbCcpIHtcbiAgICAgICAgYXJlYS5faW50ZXJuYWxTaXplLnNldCh0ZW1wQXJlYXNQaXhlbFNpemVzW2luZGV4XSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHBlcmNlbnRTaXplID0gKHRlbXBBcmVhc1BpeGVsU2l6ZXNbaW5kZXhdIC8gZHJhZ1N0YXJ0Q29udGV4dC50b3RhbEFyZWFzUGl4ZWxTaXplKSAqIDEwMFxuICAgICAgICAvLyBGaXggamF2YXNjcmlwdCBvbmx5IHdvcmtpbmcgd2l0aCBmbG9hdCBudW1iZXJzIHdoaWNoIGFyZSBpbmFjY3VyYXRlIGNvbXBhcmVkIHRvIGRlY2ltYWxzXG4gICAgICAgIGFyZWEuX2ludGVybmFsU2l6ZS5zZXQocGFyc2VGbG9hdChwZXJjZW50U2l6ZS50b0ZpeGVkKDEwKSkpXG4gICAgICB9XG4gICAgfSlcblxuICAgIHRoaXMuZHJhZ1Byb2dyZXNzU3ViamVjdC5uZXh0KHRoaXMuY3JlYXRlRHJhZ0ludGVyYWN0aW9uRXZlbnQodGhpcy5kcmFnZ2VkR3V0dGVySW5kZXgoKSkpXG4gIH1cbn1cbiIsIjxuZy1jb250ZW50PjwvbmctY29udGVudD5cbkBmb3IgKGFyZWEgb2YgX2FyZWFzKCk7IHRyYWNrIGFyZWEpIHtcbiAgQGlmICghJGxhc3QpIHtcbiAgICA8ZGl2XG4gICAgICAjZ3V0dGVyXG4gICAgICBjbGFzcz1cImFzLXNwbGl0LWd1dHRlclwiXG4gICAgICByb2xlPVwic2VwYXJhdG9yXCJcbiAgICAgIHRhYmluZGV4PVwiMFwiXG4gICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cImd1dHRlckFyaWFMYWJlbCgpXCJcbiAgICAgIFthdHRyLmFyaWEtb3JpZW50YXRpb25dPVwiZGlyZWN0aW9uKClcIlxuICAgICAgW2F0dHIuYXJpYS12YWx1ZW1pbl09XCJnZXRBcmlhVmFsdWUoYXJlYS5taW5TaXplKCkpXCJcbiAgICAgIFthdHRyLmFyaWEtdmFsdWVtYXhdPVwiZ2V0QXJpYVZhbHVlKGFyZWEubWF4U2l6ZSgpKVwiXG4gICAgICBbYXR0ci5hcmlhLXZhbHVlbm93XT1cImdldEFyaWFWYWx1ZShhcmVhLl9pbnRlcm5hbFNpemUoKSlcIlxuICAgICAgW2F0dHIuYXJpYS12YWx1ZXRleHRdPVwiZ2V0QXJpYUFyZWFTaXplVGV4dChhcmVhKVwiXG4gICAgICBbbmdTdHlsZV09XCJnZXRHdXR0ZXJHcmlkU3R5bGUoJGluZGV4ICsgMSlcIlxuICAgICAgW2NsYXNzLmFzLWRyYWdnZWRdPVwiZHJhZ2dlZEd1dHRlckluZGV4KCkgPT09ICRpbmRleFwiXG4gICAgICBhc1NwbGl0Q3VzdG9tRXZlbnRzQmVoYXZpb3JcbiAgICAgIFthc1NwbGl0Q3VzdG9tTXVsdGlDbGlja1RocmVzaG9sZF09XCJndXR0ZXJEYmxDbGlja0R1cmF0aW9uKClcIlxuICAgICAgW2FzU3BsaXRDdXN0b21DbGlja0RlbHRhSW5QeF09XCJndXR0ZXJDbGlja0RlbHRhUHgoKVwiXG4gICAgICAoYXNTcGxpdEN1c3RvbUNsaWNrKT1cImd1dHRlckNsaWNrZWQoJGluZGV4KVwiXG4gICAgICAoYXNTcGxpdEN1c3RvbURibENsaWNrKT1cImd1dHRlckRvdWJsZUNsaWNrZWQoJGluZGV4KVwiXG4gICAgICAoYXNTcGxpdEN1c3RvbU1vdXNlRG93bik9XCJndXR0ZXJNb3VzZURvd24oJGV2ZW50LCBndXR0ZXIsICRpbmRleCwgJGluZGV4LCAkaW5kZXggKyAxKVwiXG4gICAgICAoYXNTcGxpdEN1c3RvbUtleURvd24pPVwiZ3V0dGVyS2V5RG93bigkZXZlbnQsICRpbmRleCwgJGluZGV4LCAkaW5kZXggKyAxKVwiXG4gICAgPlxuICAgICAgQGlmIChjdXN0b21HdXR0ZXIoKT8udGVtcGxhdGUpIHtcbiAgICAgICAgPG5nLWNvbnRhaW5lciAqYXNTcGxpdEd1dHRlckR5bmFtaWNJbmplY3Rvcj1cIiRpbmRleCArIDE7IGxldCBpbmplY3RvclwiPlxuICAgICAgICAgIDxuZy1jb250YWluZXJcbiAgICAgICAgICAgICpuZ1RlbXBsYXRlT3V0bGV0PVwiXG4gICAgICAgICAgICAgIGN1c3RvbUd1dHRlcigpLnRlbXBsYXRlO1xuICAgICAgICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgICAgICAgYXJlYUJlZm9yZTogYXJlYSxcbiAgICAgICAgICAgICAgICBhcmVhQWZ0ZXI6IF9hcmVhcygpWyRpbmRleCArIDFdLFxuICAgICAgICAgICAgICAgIGd1dHRlck51bTogJGluZGV4ICsgMSxcbiAgICAgICAgICAgICAgICBmaXJzdDogJGZpcnN0LFxuICAgICAgICAgICAgICAgIGxhc3Q6ICRpbmRleCA9PT0gX2FyZWFzKCkubGVuZ3RoIC0gMixcbiAgICAgICAgICAgICAgICBpc0RyYWdnZWQ6IGRyYWdnZWRHdXR0ZXJJbmRleCgpID09PSAkaW5kZXhcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgaW5qZWN0b3I6IGluamVjdG9yXG4gICAgICAgICAgICBcIlxuICAgICAgICAgID48L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICB9IEBlbHNlIHtcbiAgICAgICAgPGRpdiBjbGFzcz1cImFzLXNwbGl0LWd1dHRlci1pY29uXCI+PC9kaXY+XG4gICAgICB9XG4gICAgPC9kaXY+XG4gIH1cbn1cbiJdfQ==